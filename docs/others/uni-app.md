# uni-app 自动化云打包开发思路

1.使用inquirer创建问题列表，问题列表包括hbuilder账号、密码、项目和安卓打包证书在本机的绝对路径、安卓打包证书密码  

2.根据问题列表创建环境变量文件保存在本机根目录，并设置bhuilder cli打包配置数据  

3.创建打包逻辑文件，获取打包配置数据，获取当前分支数据，判断是否为打包推送，非打包推送不进行打包（master分支忽略该处理），获取git推送消息，生成临时用的json配置文件给hbuilder使用，打包成功后会自动删除，启动hbuilder，使用shell执行打包命令，监听打包事件获取输出流数据，当数据出现“下载地址”字样则判断为打包完成，上传打包文件到qiniu服务器。把打包环境、分支、版本号及git推送信息字样拼接成群消息，使用钉钉rebot/send接口推送到群里  

4.在package.json创建打包脚本，利用husky的pre-push钩子，触发打包脚本，使用process.argv获取命令行参数用作判断，如果命令行带参数，则只执行修改环境变量配置文件操作，否则启动子进程执行打包
